<!--
  templateType: blog_post
  isAvailableForNewContent: true
  label: Blog post
-->
{% extends "./layouts/base.html" %}

{% block body %}
<div class="body-container body-container--blog-post">

  {# Blog post #}

  <article class="blog-post">
    <div class="content-wrapper">
      <div class="mt-12 border-t border-b border-dark-grey">
        <h1 class="h2 border-edge my-12 | lg:my-32">{{ content.name }}</h1>

        <div class="py-5 border-t border-dark-grey | lg:py-10">
          <a href="{{ blog_author_url(group.id, content.blog_post_author.slug) }}" class="link-inherit" rel="author">
            {{ content.blog_post_author.display_name }}
          </a>

          <time datetime="{{ content.publish_date }}" class="block">
            {{ content.publish_date_localized }}
          </time>

          {% if content.tag_list %}
            <div>
              {% for tag in content.tag_list %}
                <a href="{{ blog_tag_url(group.id, tag.slug) }}" class="link-inherit" rel="tag">{{ tag.name }}</a>{% if not loop.last %},{% endif %}
              {% endfor %}
            </div>
          {% endif %}
        </div>
      </div>

      <div class="mx-auto my-12 max-w-[980px] | lg:my-16">
        {{ content.post_body }}
      </div>
    </div>
  </article>

  {# Recent posts listing #}

  {% set tag_posts = blog_recent_tag_posts("default", content.tag_list, 4) %}
  
  {% if tag_posts|length > 2 %}
    {% set i = 0 %}

    {% set show_image = true %}
    {% set show_title = true %}
    {% set show_tags = true %}
    {% set show_publish_date = true %}
    {% set show_description = true %}

    <section class="blog-related-posts content-wrapper--vertical-spacing">
      <div class="content-wrapper">
        <h2>Related articles<span class='text-secondary'>.</span></h2>

        <hr class="mt-8 border-dark-grey"> 
        
        <div class="grid gap-x-3 gap-y-10 mt-12 | md:grid-cols-2 | lg:mt-20 lg:grid-cols-3">
          {% for blog_post in tag_posts %}
            {% if content.absolute_url != blog_post.absolute_url %}
              {% if i < 3 %}
                {% set content = blog_post %}
                  
                {% include "../templates/partials/blog-card.html" %}
                
                {% set i = i + 1 %}
              {% endif %}
            {% endif %}
          {% endfor %}
        </div>
      </div>
    </section>
  {% endif %}

</div>
{% endblock body %}
